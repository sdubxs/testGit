test to see under which circumestence the commit function works